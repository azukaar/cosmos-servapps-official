{
    "cosmos-installer": {
        "form": [
      {
        "name": "netint",
        "label": "What is your network interface? (default is eth0)",
        "initialValue": "eth0",
        "type": "text"
      }
        ],
        "post-install": [
            {
                "type": "warning",
                "label": "Read the GitHub Page for info about adopting devices and other stuff: https://github.com/jacobalberty/unifi-docker/#adopting-access-points-and-unifi-devices."
            },
            {
                "type": "warning",
                "label": "This app is known as 10.0.37.59 on the network. Tutorial on Macvlan setup: https://blog.ivansmirnov.name/set-up-pihole-using-docker-macvlan-network/."
            }
        ]
    },
    "services": {
        "{ServiceName}": {
            "image": "jacobalberty/unifi",
            "container_name": "{ServiceName}",
            "restart": "unless-stopped",
            "ports": [
                "3478:3478/udp",
                "6789:6789",
                "8443:8443",
                "8080:8080",
                "8880:8880",
                "8843:8843",
                "10001:10001/udp"
            ],
            "environment": [
                "TZ=auto"
            ],
            "volumes": [
                {
                    "source": "{ServiceName}-unifi",
                    "target": "/unifi",
                    "type": "volume"
                }
            ],
            "user": "unifi",
            "init": true,
            "networks": {
                "{ServiceName}-net": {
                    "ipv4_address": "10.0.37.59" 
                }
            },
          "routes": [
             {
                "name": "{ServiceName}",
                "description": "Expose {ServiceName} to the web",
                "useHost": true,
                "target": "https://{ServiceName}:8443",
                "mode": "SERVAPP",
                "Timeout": 14400000,
                "ThrottlePerMinute": 12000,
                "AcceptInsecureHTTPSTarget": true,
                "BlockCommonBots": true,
                "SmartShield": {
                   "Enabled": true
                }
             }
          ],
          "labels": {
             "cosmos-force-network-secured": "false",
             "cosmos-auto-update": "true",
             "cosmos-icon": "https://azukaar.github.io/cosmos-servapps-official/servapps/Unify-Controller/icon.png",
             "cosmos-persistent-env": "TZ"
          }
       }
    },
    "networks": {
      "{ServiceName}-net": {
         "driver": "macvlan",
         "driver_opts": {
            "parent": "{Context.netint}"
         },
         "ipam": {
            "config": [
               {
                  "subnet": "10.0.37.9/24",
                  "gateway": "10.0.37.1",
                  "ip_range": "10.0.37.59/28"
               }
            ]
         }
      }
    }   
 }
