{
  "cosmos-installer": {
    "form": [
      {
        "name": "wopihost",
        "label": "What is the domain of your WOPI host?",
        "initialValue": "https://nextcloud.example.com",
        "type": "text"
      }
    ]
  },
  "services": {
    "{ServiceName}": {
      "image": "collabora/code",
      "container_name": "{ServiceName}",
      "restart": "unless-stopped",
      "environment": [
        "aliasgroup1={Context.wopihost}",
        "server_name={Context.wopihost}"
      ],
      "labels": {
        "cosmos-force-network-secured": "true",
        "cosmos-auto-update": "true",
        "cosmos-icon": "https://www.collaboraoffice.com/wp-content/uploads/2022/03/cropped-collabora-productivity-nav-icon.png"
      },
      "routes": [
        {
          "name": "{ServiceName}_browser",
          "description": "{ServiceName} static assets",
          "useHost": true,
          "host": "{Context.wopihost}",
          "usePathPrefix": true,
          "pathPrefix": "/browser",
          "target": "https://{ServiceName}:9980",
          "AcceptInsecureHTTPSTarget": true,
          "mode": "SERVAPP",
          "Timeout": 14400000,
          "ThrottlePerMinute": 12000,
          "BlockCommonBots": true,
          "SmartShield": {
            "Enabled": true
          },
          "hideFromDashboard": true
        },
        {
          "name": "{ServiceName}_hosting_discovery",
          "description": "{ServiceName} WOPI discovery URL",
          "useHost": true,
          "host": "{Context.wopihost}",
          "usePathPrefix": true,
          "pathPrefix": "/hosting/discovery",
          "target": "https://{ServiceName}:9980",
          "AcceptInsecureHTTPSTarget": true,
          "mode": "SERVAPP",
          "Timeout": 14400000,
          "ThrottlePerMinute": 12000,
          "BlockCommonBots": true,
          "SmartShield": {
            "Enabled": true
          },
          "hideFromDashboard": true
        },
        {
          "name": "{ServiceName}_hosting_capabilities",
          "description": "{ServiceName} capabilities",
          "useHost": true,
          "host": "{Context.wopihost}",
          "usePathPrefix": true,
          "pathPrefix": "/hosting/capabilities",
          "target": "https://{ServiceName}:9980",
          "AcceptInsecureHTTPSTarget": true,
          "mode": "SERVAPP",
          "Timeout": 14400000,
          "ThrottlePerMinute": 12000,
          "BlockCommonBots": true,
          "SmartShield": {
            "Enabled": true
          },
          "hideFromDashboard": true
        },
        {
          "name": "{ServiceName}_cool",
          "description": "{ServiceName} Fullscreen presentation and Image upload operations",
          "useHost": true,
          "host": "{Context.wopihost}",
          "usePathPrefix": true,
          "pathPrefix": "/cool",
          "target": "https://{ServiceName}:9980",
          "AcceptInsecureHTTPSTarget": true,
          "mode": "SERVAPP",
          "Timeout": 14400000,
          "ThrottlePerMinute": 12000,
          "BlockCommonBots": true,
          "SmartShield": {
            "Enabled": true
          },
          "hideFromDashboard": true
        },
        {
          "name": "{ServiceName}_lool",
          "description": "{ServiceName} compatibility with integrations that use the /lool/convert-to endpoint",
          "useHost": true,
          "host": "{Context.wopihost}",
          "usePathPrefix": true,
          "pathPrefix": "/lool",
          "target": "https://{ServiceName}:9980",
          "AcceptInsecureHTTPSTarget": true,
          "mode": "SERVAPP",
          "Timeout": 14400000,
          "ThrottlePerMinute": 12000,
          "BlockCommonBots": true,
          "SmartShield": {
            "Enabled": true
          },
          "hideFromDashboard": true
        }
      ]
    }
  }
}
